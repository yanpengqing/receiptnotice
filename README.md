# 没有办法的获取到收款推送的办法

#### 目前个人收款现状

##### 个人申请支付接口现状

- 原生支付宝，微信支付

- `支付宝只服务于有营业执照、个体工商户的商户。就算你有钱但没实体店铺在某宝上也是买不到的。截止目前无法以个人身份（或以个人为主体）直接申请API。网上那些 “个人申请支付宝xx接口” 的文章就不要看了，节约时间。微信同支付宝，不支付个人申请。`
    
##### 原先的方法不管用了

- 最好的方法是抓取与支付宝绑定的邮件，但是只要你绑定了电话，支付包就不发邮件和短信提醒你有收款到帐了。

- 抓自己支付宝网页版的账单，这个关键在于复制出cookie,原先一个cookie可以使用一个月，现在是动态的5分钟就变了。使用模拟登录，支付宝的风控很厉害，导致模拟登录容易被封。



#### 实在是没有法子的办法

- 手机安装一个app,然后这个服务监听手机收到的通知，如果是收到收款的通知，就把信息推送到指定的url去。

#### 本软件使用方法

- 安装后先将软件加入系统白名单，各个安卓系统的方法各有不同

- 打开软件自动跳转到获取通知权限页面，允许本应用监控通知

- 返回到软件主页，填写你要接受收款信息通知的url,软件在接到收款通知后，会用post的方法，发送json信息.

- 详细使用方法，参考[wiki](https://github.com/WeihuaGu/receiptnotice/wiki)

#### 这个可搭配服务端getreceipt-server
[getreceipt-server](https://github.com/WeihuaGu/getreceipt-server)

安装后先将软件加入系统白名单，各个安卓系统的方法各有不同

打开软件自动跳转到获取通知权限页面，允许本应用监控通知

返回到软件主页，填写你要接受收款信息通知的url以及唯一码,软件在接到收款通知后，会用post的方法，发送json信息到服务器

这种方法的准确率怎么样？或者怎么提高准确率？
1.尽量同时支持微信支付与支付宝支付 我们可以设用户选择的付款方式为事件A,那么当你同时支持两种方式时，一次付款的p(A)=1/2
2.对价格给一个最后一位的减免 我们同样设付款的价格为事件B，那么出现这个价格的概率为p(B)=1/10*1/10=1/100
3.考虑时间因素 我们假定用户购买的时间也是随机的，如果我们只考虑小时和分钟数，那么这个时间的概率大概是p(C)=1/13*1/60=1/780
4.因为支付方式的选择与减免的金额与购买的时间，我们可以认为独立 那么这种方式出错的概率大概就是p(ABC)=p(A)p(B)p(C)=(1/2)(1/100)(1/780)=1/156000
即如果能做到上面的两点，一次付款出错的概率大概在15万分之一，这个出错的概率，如果购买量小的化，是可以接受的。